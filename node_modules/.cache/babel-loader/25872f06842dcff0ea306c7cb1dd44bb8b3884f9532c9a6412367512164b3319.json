{"ast":null,"code":"// src/components/VideoDownloader.js\nimport React,{useState,useEffect}from'react';import axios from'axios';import'./VideoDownloader.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VideoDownloader=()=>{const[url,setUrl]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[progress,setProgress]=useState(0);useEffect(()=>{const ws=new WebSocket('ws://localhost:5000');ws.onmessage=event=>{const message=JSON.parse(event.data);if(message.progress!==null){setProgress(message.progress);}};return()=>{ws.close();};},[]);const handleDownload=async()=>{if(!url){setError('Please enter a URL');return;}setError('');setLoading(true);try{const response=await axios.post('http://localhost:5000/api/download',{url},{responseType:'blob'});const contentType=response.headers['content-type'];const blob=new Blob([response.data],{type:contentType});const link=document.createElement('a');link.href=window.URL.createObjectURL(blob);link.download='video.mp4';document.body.appendChild(link);link.click();document.body.removeChild(link);}catch(err){console.error('Error during download:',err);setError('Error downloading the video');}finally{setLoading(false);setProgress(0);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"video-downloader\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:url,onChange:e=>setUrl(e.target.value),placeholder:\"Enter YouTube video URL\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDownload,disabled:loading,children:loading?'Downloading...':'Download Video'}),loading&&/*#__PURE__*/_jsxs(\"p\",{className:\"progress\",children:[\"Progress: \",progress,\"%\"]}),error&&/*#__PURE__*/_jsx(\"p\",{children:error})]});};export default VideoDownloader;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","VideoDownloader","url","setUrl","error","setError","loading","setLoading","progress","setProgress","ws","WebSocket","onmessage","event","message","JSON","parse","data","close","handleDownload","response","post","responseType","contentType","headers","blob","Blob","type","link","document","createElement","href","window","URL","createObjectURL","download","body","appendChild","click","removeChild","err","console","className","children","value","onChange","e","target","placeholder","onClick","disabled"],"sources":["D:/proyectosPersonales/video-downloader/frontend/src/components/VideoDownloader.js"],"sourcesContent":["// src/components/VideoDownloader.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './VideoDownloader.css';\r\n\r\nconst VideoDownloader = () => {\r\n    const [url, setUrl] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [progress, setProgress] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const ws = new WebSocket('ws://localhost:5000');\r\n        \r\n        ws.onmessage = (event) => {\r\n            const message = JSON.parse(event.data);\r\n            if (message.progress !== null) {\r\n                setProgress(message.progress);\r\n            }\r\n        };\r\n\r\n        return () => {\r\n            ws.close();\r\n        };\r\n    }, []);\r\n\r\n    const handleDownload = async () => {\r\n        if (!url) {\r\n            setError('Please enter a URL');\r\n            return;\r\n        }\r\n\r\n        setError('');\r\n        setLoading(true);\r\n\r\n        try {\r\n            const response = await axios.post('http://localhost:5000/api/download', { url }, { responseType: 'blob' });\r\n\r\n            const contentType = response.headers['content-type'];\r\n            const blob = new Blob([response.data], { type: contentType });\r\n            const link = document.createElement('a');\r\n            link.href = window.URL.createObjectURL(blob);\r\n            link.download = 'video.mp4';\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n        } catch (err) {\r\n            console.error('Error during download:', err);\r\n            setError('Error downloading the video');\r\n        } finally {\r\n            setLoading(false);\r\n            setProgress(0);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"video-downloader\">\r\n            <input\r\n                type=\"text\"\r\n                value={url}\r\n                onChange={(e) => setUrl(e.target.value)}\r\n                placeholder=\"Enter YouTube video URL\"\r\n            />\r\n            <button onClick={handleDownload} disabled={loading}>\r\n                {loading ? 'Downloading...' : 'Download Video'}\r\n            </button>\r\n            {loading && <p className=\"progress\">Progress: {progress}%</p>}\r\n            {error && <p>{error}</p>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VideoDownloader;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}